<!-- templates/auth/signup.html -->
<!DOCTYPE html>
<html lang="en">
<head>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>

  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Sign Up | SynergySphere</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      background: linear-gradient(-45deg, #0f0f0f, #1a1a1a, #222, #111);
      background-size: 400% 400%;
      animation: gradient 12s ease infinite;
    }
    @keyframes gradient {
      0% {background-position: 0% 50%;}
      50% {background-position: 100% 50%;}
      100% {background-position: 0% 50%;}
    }

    .toastify {
  animation: fadeInUp 0.5s ease;
}
@keyframes fadeInUp {
  from { opacity: 0; transform: translate3d(0, 20%, 0); }
  to { opacity: 1; transform: translate3d(0, 0, 0); }
}
  </style>
</head>
<body class="flex items-center justify-center min-h-screen text-white">

  <div class="w-full max-w-md p-8 space-y-6 bg-black/40 backdrop-blur-2xl rounded-2xl shadow-2xl border border-gray-800">
    <div class="text-center">
      <h1 class="text-3xl font-bold tracking-tight">SynergySphere</h1>
      <p class="text-gray-400 text-sm">Create your account</p>
    </div>

    <form method="POST" action="{% url 'signup' %}" class="space-y-4">
      {% csrf_token %}
      <input type="text" name="username" placeholder="Username"
        class="w-full px-4 py-3 rounded-lg bg-gray-900 border border-gray-700 focus:ring-2 focus:ring-pink-400 outline-none text-white" required>

      <input type="email" name="email" placeholder="Email"
        class="w-full px-4 py-3 rounded-lg bg-gray-900 border border-gray-700 focus:ring-2 focus:ring-pink-400 outline-none text-white" required>

      <div class="relative mb-1">
        <input type="password" name="password1" id="password1" placeholder="Password"
          class="w-full px-4 py-3 rounded-lg bg-gray-900 border border-gray-700 focus:ring-2 focus:ring-pink-400 outline-none text-white pr-10" required>
        
        <button type="button" onclick="togglePassword('password1')" class="absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-white">
          <!-- Eye Open Icon -->
          <svg id="eyeOpen1" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
          <!-- Eye Closed Icon -->
          <svg id="eyeClosed1" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.052 10.052 0 013.094-4.23M6.41 6.41A9.968 9.968 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.963 9.963 0 01-1.788 3.046M3 3l18 18" />
          </svg>
        </button>
      </div>
      <p id="password-strength" class="mt-1 text-sm"></p>


      <div class="relative">
        <input type="password" name="password2" id="password2" placeholder="Confirm Password"
          class="w-full px-4 py-3 rounded-lg bg-gray-900 border border-gray-700 focus:ring-2 focus:ring-pink-400 outline-none text-white pr-10" required>
        
        <button type="button" onclick="togglePassword('password2')" class="absolute inset-y-0 right-3 flex items-center text-gray-400 hover:text-white">
          <!-- Eye Open Icon -->
          <svg id="eyeOpen2" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6 hidden" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z" />
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z" />
          </svg>
          <!-- Eye Closed Icon -->
          <svg id="eyeClosed2" xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.542-7a10.052 10.052 0 013.094-4.23M6.41 6.41A9.968 9.968 0 0112 5c4.478 0 8.268 2.943 9.542 7a9.963 9.963 0 01-1.788 3.046M3 3l18 18" />
          </svg>
        </button>
      </div>

      <button type="submit"
        class="w-full py-3 font-semibold text-black bg-white rounded-lg hover:bg-gray-200 transition">
        Sign Up
      </button>
    </form>

    <p class="text-center text-sm text-gray-400">
      Already have an account? 
      <a href="{% url 'login' %}" class="text-indigo-400 hover:underline">Login</a>
    </p>
  </div>

  {% for message in messages %}
  {% if "auth" in message.tags %}
    <script>
      Toastify({
        text: "{{ message|escapejs }}",
        duration: 4000,
        gravity: "top",
        position: "right",
        backgroundColor: "{% if 'success' in message.tags %}linear-gradient(to right, #00b09b, #96c93d){% else %}linear-gradient(to right, #ff416c, #ff4b2b){% endif %}",
        stopOnFocus: true,
        style: { borderRadius: "8px", fontSize: "14px", padding: "12px 16px" }
      }).showToast();
    </script>
  {% endif %}
{% endfor %}


  <script>
    function togglePassword(id) {
        const pass = document.getElementById(id);
        const eyeOpen = document.getElementById("eyeOpen" + id.slice(-1));
        const eyeClosed = document.getElementById("eyeClosed" + id.slice(-1));

        if (pass.type === "password") {
            pass.type = "text";
            eyeOpen.classList.remove("hidden");
            eyeClosed.classList.add("hidden");
        } else {
            pass.type = "password";
            eyeOpen.classList.add("hidden");
            eyeClosed.classList.remove("hidden");
        }
    }

// Password strength logic remains the same
      const passInput = document.getElementById("password1");
      const strengthText = document.getElementById("password-strength");

      passInput.addEventListener("input", function () {
          const value = passInput.value;
          let strength = "Weak";
          let color = "red";

          if (value.length > 8 && /[A-Z]/.test(value) && /\d/.test(value) && /[\W_]/.test(value)) {
              strength = "Strong";
              color = "green";
          } else if (value.length >= 6) {
              strength = "Medium";
              color = "orange";
          }

          strengthText.textContent = "Password Strength: " + strength;
          strengthText.style.color = color;
          strengthText.style.transition = "all 0.4s ease";
      });
  </script>
</body>
</html>
